"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Four = Four;

var _ = require(".");

var _node = require("../2-node");

var _core = require("../0-core");

function Four(a, b, c, d) {
  this.a = a;
  this.b = b;
  this.c = c;
  this.d = d;
  this.v = null;
}

Four.prototype = new _.Digit();

Four.prototype.measure = function (M) {
  if (this.v === null) this.v = M.plus(M.measure(this.a), M.plus(M.measure(this.b), M.plus(M.measure(this.c), M.measure(this.d))));
  return this.v;
};

Four.prototype.head = function () {
  return this.a;
};

Four.prototype.last = function () {
  return this.d;
};

Four.prototype.init = function () {
  return new _.Three(this.a, this.b, this.c);
};

Four.prototype.tail = function () {
  return new _.Three(this.b, this.c, this.d);
};

Four.prototype.push = function (value) {
  throw new Error("cannot push digit Four");
};

Four.prototype.cons = function (value) {
  throw new Error("cannot cons digit Four");
};

Four.prototype.node = function (M) {
  throw new Error("cannot convert Four to node");
};
/**
 * It is assumed that p(|this|) is true.
 */


Four.prototype.splitDigit = function (p, i, M) {
  i = M.plus(i, M.measure(this.a));
  if (p(i)) return new _core.Split([], this.a, [this.b, this.c, this.d]);
  i = M.plus(i, M.measure(this.b));
  if (p(i)) return new _core.Split([this.a], this.b, [this.c, this.d]);
  i = M.plus(i, M.measure(this.c));
  if (p(i)) return new _core.Split([this.a, this.b], this.c, [this.d]);
  return new _core.Split([this.a, this.b, this.c], this.d, []);
};

Four.prototype._nodes = function (M, other) {
  if (other instanceof _.One) return [(0, _node.node3)(M, this.a, this.b, this.c), (0, _node.node2)(M, this.d, other.a)];
  if (other instanceof _.Two) return [(0, _node.node3)(M, this.a, this.b, this.c), (0, _node.node3)(M, this.d, other.a, other.b)];
  if (other instanceof _.Three) return [(0, _node.node3)(M, this.a, this.b, this.c), (0, _node.node2)(M, this.d, other.a), (0, _node.node2)(M, other.b, other.c)];
  return [(0, _node.node3)(M, this.a, this.b, this.c), (0, _node.node3)(M, this.d, other.a, other.b), (0, _node.node2)(M, other.c, other.d)];
};

Four.prototype._list = function () {
  return [this.a, this.b, this.c, this.d];
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy8xLWRpZ2l0LzQtRm91ci5qcyJdLCJuYW1lcyI6WyJGb3VyIiwiYSIsImIiLCJjIiwiZCIsInYiLCJwcm90b3R5cGUiLCJEaWdpdCIsIm1lYXN1cmUiLCJNIiwicGx1cyIsImhlYWQiLCJsYXN0IiwiaW5pdCIsIlRocmVlIiwidGFpbCIsInB1c2giLCJ2YWx1ZSIsIkVycm9yIiwiY29ucyIsIm5vZGUiLCJzcGxpdERpZ2l0IiwicCIsImkiLCJTcGxpdCIsIl9ub2RlcyIsIm90aGVyIiwiT25lIiwiVHdvIiwiX2xpc3QiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFFTyxTQUFTQSxJQUFULENBQWdCQyxDQUFoQixFQUFvQkMsQ0FBcEIsRUFBd0JDLENBQXhCLEVBQTRCQyxDQUE1QixFQUFnQztBQUN0QyxPQUFLSCxDQUFMLEdBQVNBLENBQVQ7QUFDQSxPQUFLQyxDQUFMLEdBQVNBLENBQVQ7QUFDQSxPQUFLQyxDQUFMLEdBQVNBLENBQVQ7QUFDQSxPQUFLQyxDQUFMLEdBQVNBLENBQVQ7QUFDQSxPQUFLQyxDQUFMLEdBQVMsSUFBVDtBQUNBOztBQUVETCxJQUFJLENBQUNNLFNBQUwsR0FBaUIsSUFBSUMsT0FBSixFQUFqQjs7QUFFQVAsSUFBSSxDQUFDTSxTQUFMLENBQWVFLE9BQWYsR0FBeUIsVUFBV0MsQ0FBWCxFQUFlO0FBQ3ZDLE1BQUssS0FBS0osQ0FBTCxLQUFXLElBQWhCLEVBQXVCLEtBQUtBLENBQUwsR0FBU0ksQ0FBQyxDQUFDQyxJQUFGLENBQy9CRCxDQUFDLENBQUNELE9BQUYsQ0FBVyxLQUFLUCxDQUFoQixDQUQrQixFQUUvQlEsQ0FBQyxDQUFDQyxJQUFGLENBQ0NELENBQUMsQ0FBQ0QsT0FBRixDQUFXLEtBQUtOLENBQWhCLENBREQsRUFFQ08sQ0FBQyxDQUFDQyxJQUFGLENBQ0NELENBQUMsQ0FBQ0QsT0FBRixDQUFXLEtBQUtMLENBQWhCLENBREQsRUFFQ00sQ0FBQyxDQUFDRCxPQUFGLENB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QUFQLEVBQVdpQixLQUFLLENBQUN2QixDQUFqQixFQUFxQnVCLEtBQUssQ0FBQ3RCLENBQTNCLENBQXBGLENBQVA7QUFDQSxDQVJEOztBQVVBSixJQUFJLENBQUNNLFNBQUwsQ0FBZXVCLEtBQWYsR0FBdUIsWUFBYTtBQUNuQyxTQUFPLENBQUUsS0FBSzVCLENBQVAsRUFBVyxLQUFLQyxDQUFoQixFQUFvQixLQUFLQyxDQUF6QixFQUE2QixLQUFLQyxDQUFsQyxDQUFQO0FBQ0EsQ0FGRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERpZ2l0ICwgT25lICwgVHdvICwgVGhyZWUgfSBmcm9tICcuJyA7XG5pbXBvcnQgeyBub2RlMiAsIG5vZGUzIH0gZnJvbSAnLi4vMi1ub2RlJyA7XG5pbXBvcnQgeyBTcGxpdCB9IGZyb20gJy4uLzAtY29yZScgO1xuXG5leHBvcnQgZnVuY3Rpb24gRm91ciAoIGEgLCBiICwgYyAsIGQgKSB7XG5cdHRoaXMuYSA9IGEgO1xuXHR0aGlzLmIgPSBiIDtcblx0dGhpcy5jID0gYyA7XG5cdHRoaXMuZCA9IGQgO1xuXHR0aGlzLnYgPSBudWxsIDtcbn1cblxuRm91ci5wcm90b3R5cGUgPSBuZXcgRGlnaXQoICkgO1xuXG5Gb3VyLnByb3RvdHlwZS5tZWFzdXJlID0gZnVuY3Rpb24gKCBNICkge1xuXHRpZiAoIHRoaXMudiA9PT0gbnVsbCApIHRoaXMudiA9IE0ucGx1cyhcblx0XHRNLm1lYXN1cmUoIHRoaXMuYSApICxcblx0XHRNLnBsdXMoXG5cdFx0XHRNLm1lYXN1cmUoIHRoaXMuYiApICxcblx0XHRcdE0ucGx1cyhcblx0XHRcdFx0TS5tZWFzdXJlKCB0aGlzLmMgKSAsXG5cdFx0XHRcdE0ubWVhc3VyZSggdGhpcy5kIClcblx0XHRcdClcblx0XHQpXG5cdCkgO1xuXHRyZXR1cm4gdGhpcy52IDtcbn0gO1xuXG5Gb3VyLnByb3RvdHlwZS5oZWFkID0gZnVuY3Rpb24gKCApIHtcblx0cmV0dXJuIHRoaXMuYSA7XG59IDtcblxuRm91ci5wcm90b3R5cGUubGFzdCA9IGZ1bmN0aW9uICggKSB7XG5cdHJldHVybiB0aGlzLmQgO1xufSA7XG5cbkZvdXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoICkge1xuXHRyZXR1cm4gbmV3IFRocmVlKCB0aGlzLmEgLCB0aGlzLmIgLCB0aGlzLmMgKSA7XG59IDtcblxuRm91ci5wcm90b3R5cGUudGFpbCA9IGZ1bmN0aW9uICggKSB7XG5cdHJldHVybiBuZXcgVGhyZWUoIHRoaXMuYiAsIHRoaXMuYyAsIHRoaXMuZCApIDtcbn0gO1xuXG5Gb3VyLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKCB2YWx1ZSApIHtcblx0dGhyb3cgbmV3IEVycm9yKCBcImNhbm5vdCBwdXNoIGRpZ2l0IEZvdXJcIiApIDtcbn0gO1xuXG5Gb3VyLnByb3RvdHlwZS5jb25zID0gZnVuY3Rpb24gKCB2YWx1ZSApIHtcblx0dGhyb3cgbmV3IEVycm9yKCBcImNhbm5vdCBjb25zIGRpZ2l0IEZvdXJcIiApIDtcbn0gO1xuXG5Gb3VyLnByb3RvdHlwZS5ub2RlID0gZnVuY3Rpb24gKCBNICkge1xuXHR0aHJvdyBuZXcgRXJyb3IoIFwiY2Fubm90IGNvbnZlcnQgRm91ciB0byBub2RlXCIgKSA7XG59IDtcblxuLyoqXG4gKiBJdCBpcyBhc3N1bWVkIHRoYXQgcCh8dGhpc3wpIGlzIHRydWUuXG4gKi9cbkZvdXIucHJvdG90eXBlLnNwbGl0RGlnaXQgPSBmdW5jdGlvbiAoIHAgLCBpICwgTSApIHtcblx0aSA9IE0ucGx1cyggaSAsIE0ubWVhc3VyZSggdGhpcy5hICkgKSA7XG5cdGlmICggcCggaSApICkgcmV0dXJuIG5ldyBTcGxpdCggWyBdICwgdGhpcy5hICwgWyB0aGlzLmIgLCB0aGlzLmMgLCB0aGlzLmQgXSApIDtcblx0aSA9IE0ucGx1cyggaSAsIE0ubWVhc3VyZSggdGhpcy5iICkgKSA7XG5cdGlmICggcCggaSApICkgcmV0dXJuIG5ldyBTcGxpdCggWyB0aGlzLmEgXSAsIHRoaXMuYiAsIFsgdGhpcy5jICwgdGhpcy5kIF0gKSA7XG5cdGkgPSBNLnBsdXMoIGkgLCBNLm1lYXN1cmUoIHRoaXMuYyApICkgO1xuXHRpZiAoIHAoIGkgKSApIHJldHVybiBuZXcgU3BsaXQoIFsgdGhpcy5hICwgdGhpcy5iIF0gLCB0aGlzLmMgLCBbIHRoaXMuZCBdICkgO1xuXHRyZXR1cm4gbmV3IFNwbGl0KCBbIHRoaXMuYSAsIHRoaXMuYiAsIHRoaXMuYyBdICwgdGhpcy5kICwgWyBdICkgO1xufSA7XG5cbkZvdXIucHJvdG90eXBlLl9ub2RlcyA9IGZ1bmN0aW9uICggTSAsIG90aGVyICkge1xuXHRpZiAoIG90aGVyIGluc3RhbmNlb2YgT25lIClcblx0XHRyZXR1cm4gWyBub2RlMyggTSAsIHRoaXMuYSAsIHRoaXMuYiAsIHRoaXMuYyApICwgbm9kZTIoIE0gLCB0aGlzLmQgLCBvdGhlci5hICkgXSA7XG5cdGlmICggb3RoZXIgaW5zdGFuY2VvZiBUd28gKVxuXHRcdHJldHVybiBbIG5vZGUzKCBNICwgdGhpcy5hICwgdGhpcy5iICwgdGhpcy5jICkgLCBub2RlMyggTSAsIHRoaXMuZCAsIG90aGVyLmEgLCBvdGhlci5iICkgXSA7XG5cdGlmICggb3RoZXIgaW5zdGFuY2VvZiBUaHJlZSApXG5cdFx0cmV0dXJuIFsgbm9kZTMoIE0gLCB0aGlzLmEgLCB0aGlzLmIgLCB0aGlzLmMgKSAsIG5vZGUyKCBNICwgdGhpcy5kICwgb3RoZXIuYSApICwgbm9kZTIoIE0gLCBvdGhlci5iICwgb3RoZXIuYyApIF0gO1xuXHRyZXR1cm4gWyBub2RlMyggTSAsIHRoaXMuYSAsIHRoaXMuYiAsIHRoaXMuYyApICwgbm9kZTMoIE0gLCB0aGlzLmQgLCBvdGhlci5hICwgb3RoZXIuYiApICwgbm9kZTIoIE0gLCBvdGhlci5jICwgb3RoZXIuZCApIF0gO1xufSA7XG5cbkZvdXIucHJvdG90eXBlLl9saXN0ID0gZnVuY3Rpb24gKCApIHtcblx0cmV0dXJuIFsgdGhpcy5hICwgdGhpcy5iICwgdGhpcy5jICwgdGhpcy5kIF0gO1xufSA7XG4iXX0=